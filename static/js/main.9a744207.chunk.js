(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,n){e.exports=n(87)},32:function(e,t,n){},35:function(e,t,n){},40:function(e,t){},42:function(e,t){},83:function(e,t){},87:function(e,t,n){"use strict";n.r(t);n(32);var a=n(3),r=n.n(a),c=n(28),o=n(8),s=n(2),l=(n(35),n(1)),u=n.n(l),i=function(e){var t=e.messages,n=e.prismUrl;return u.a.createElement(u.a.Fragment,null,Object.values(t).map(function(e){var t=new Date(e.Timestamp/1e6),a=e.Author.substr(0,6),r="".concat(n,"/block/").concat(e.BlockHeight);return u.a.createElement("div",{className:"row",key:e.id},u.a.createElement("div",{className:"column column-20"},u.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer"},t.toLocaleString())," "),u.a.createElement("strong",{className:"column column-10",title:"0x".concat(e.Author)},a,":"),u.a.createElement("div",{className:"column column-90"},e.Message))}))},m=function(e){var t=e.onSend,n=Object(l.useState)(""),a=Object(s.a)(n,2),r=a[0],c=a[1],o=function(){r&&(t(r),c(""))};return u.a.createElement(u.a.Fragment,null,u.a.createElement("br",null),u.a.createElement("textarea",{rows:"15",placeholder:"What's up?",value:r,onKeyPress:function(e){return"Enter"===e.key&&o()},onChange:function(e){return c(e.target.value)}}),u.a.createElement("button",{onClick:o},"Send"))},d=n(5),p=function(e){var t=e.publicKey,n=e.privateKey,a=e.contractName,p=e.channel,b=e.nodeUrl,v=e.virtualChainId,f=e.prismUrl,g=e.address,E=Object(l.useState)({}),h=Object(s.a)(E,2),O=h[0],j=h[1],y=new d.a("".concat(b),v,"TEST_NET"),S=function(e){if("COMPLETED"!==e.requestStatus&&"SUCCESS"!==e.executionResult&&"COMMITTED"!==e.transactionStatus)throw console.error(e),new Error(e)},k=1,w=function(){var e=Object(o.a)(r.a.mark(function e(){var n,o,s,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.createQuery(t,a,"getMessagesForChannel",[Object(d.b)(p),Object(d.c)(k),Object(d.c)(k+5)]),e.prev=1,e.next=4,y.sendQuery(n);case 4:o=e.sent,S(o),(s=JSON.parse(o.outputArguments[0].value))&&s.length&&(k+=s.length,l=s.reduce(function(e,t){return e[t.ID]=t,e[t.ID].id=t.ID,e},O),j(Object(c.a)({},l))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(o.a)(r.a.mark(function e(c){var o,l,u,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=y.createTransaction(t,n,a,"sendMessageToChannel",[Object(d.b)(p),Object(d.b)(c)]),l=Object(s.a)(o,1),u=l[0],e.next=3,y.sendTransaction(u);case 3:i=e.sent,S(i),console.log(i.outputArguments[0].value);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(l.useEffect)(function(){w(),setInterval(w,1e3)},[]),u.a.createElement("main",{className:"container"},u.a.createElement("nav",{className:"navigation"},u.a.createElement("section",{className:"container"},u.a.createElement("h1",{className:"title"},"Conversation App"),u.a.createElement("div",null,"your address: ",g),u.a.createElement("div",null,"channel: ",p),u.a.createElement("div",null,"contract:"," ",u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(f,"/contract/").concat(a)},a)))),u.a.createElement(i,{prismUrl:f,messages:O}),u.a.createElement(m,{onSend:_}))},b=n(30),v=n.n(b),f={nodeUrl:"".concat("https://validator.orbs-test.com","/vchains/").concat("2013"),virtualChainId:"2013",contractName:"orbs_conversation",channel:"orbs",prismUrl:"https://prism.orbs-test.com/vchains/".concat("2013")};if(!localStorage.getItem("sender_public_key")){var g=Object(d.d)();localStorage.setItem("sender_public_key",Object(d.f)(g.publicKey)),localStorage.setItem("sender_private_key",Object(d.f)(g.privateKey)),localStorage.setItem("sender_address",g.address)}f.publicKey=Object(d.e)(localStorage.getItem("sender_public_key")),f.privateKey=Object(d.e)(localStorage.getItem("sender_private_key")),f.address=localStorage.getItem("sender_address"),v.a.render(u.a.createElement(p,f),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.9a744207.chunk.js.map